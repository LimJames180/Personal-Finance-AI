{% extends 'tracker/base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container">
    <h2 class="mb-4">Welcome back ðŸ‘‹</h2>

    <!-- Summary Cards -->
    <div class="row g-4">
        <div class="col-md-4">
            <div class="card card-summary bg-white shadow-sm">
                <div class="card-body">
                    <h6 class="text-secondary">Total Spending</h6>
                    <h3 class="text-danger">â‚¬ 450.00</h3>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card card-summary bg-white shadow-sm">
                <div class="card-body">
                    <h6 class="text-secondary">Total Earnings</h6>
                    <h3 class="text-success">â‚¬ 950.00</h3>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card card-summary bg-white shadow-sm">
                <div class="card-body">
                    <h6 class="text-secondary">Budget Left</h6>
                    <h3 class="text-primary">â‚¬ 500.00</h3>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts Row -->
    <div class="row mt-5">
        <div class="col-md-8">
            <div class="card bg-white shadow-sm">
                <div class="card-body">
                    <h6>Spending Trend vs Budget</h6>
                    <canvas id="monthlyTrendChart" height="120"></canvas>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-white shadow-sm">
                <div class="card-body">
                    <h6>Spending Categories</h6>
                    <canvas id="pieChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctxMonthly = document.getElementById('monthlyTrendChart');
    if (ctxMonthly) {
        new Chart(ctxMonthly, {
            type: 'line',
            data: {
                labels: ['Day 1', 'Day 5', 'Day 10', 'Day 15', 'Day 20', 'Day 25', 'Day 30'],
                datasets: [
                    {
                        label: 'Cumulative Spending',
                        data: [0, 100, 250, 400, 700, 850, 950],  // actual growing values
                        borderColor: '#f87171',
                        backgroundColor: '#f87171',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.3
                    },
                    {
                        label: 'Monthly Budget',
                        data: [1000, 1000, 1000, 1000, 1000, 1000, 1000], // flat reference line
                        borderColor: '#60a5fa',
                        backgroundColor: '#60a5fa',
                        borderDash: [5, 5],
                        borderWidth: 2,
                        fill: false,
                        tension: 0
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        suggestedMax: 1200
                    }
                }
            }
        });
    }

    const ctx2 = document.getElementById('pieChart');
    if (ctx2) {
        new Chart(ctx2, {
            type: 'doughnut',
            data: {
                labels: [
                    'Food', 'Housing', 'Transportation', 'Health', 'Entertainment',
                    'Shopping', 'Bills', 'Travel', 'Education', 'Finance', 'Donations', 'Miscellaneous'
                ],
                datasets: [{
                    data: [80, 120, 100, 60, 90, 70, 110, 40, 50, 30, 20, 35], // Dummy values
                    backgroundColor: [
                        '#60a5fa', '#facc15', '#f87171', '#34d399', '#c084fc',
                        '#fbbf24', '#4ade80', '#38bdf8', '#818cf8', '#f472b6',
                        '#fdba74', '#a78bfa'
                    ]
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
    });
}
</script>

{% endblock %}